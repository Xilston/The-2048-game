function e(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var s=document.getElementById("game-table").getElementsByTagName("tr"),a=document.getElementById("start"),n=document.getElementById("message-start"),l=document.getElementById("message-win"),o=document.getElementById("message-lose"),u=document.getElementById("game-score"),v=function(){function t(){e(this,t),this.size=4,this.chipsArray=[],this.status=!1,this.score=0,this.win=!1,this.gameOver=!1}return r(t,[{key:"startGame",value:function(){this.status=!0,this.chipsArray=[],this.score=0,this.win=!1,this.gameOver=!1;for(var e=0;e<this.size;e++){for(var t=[],r=0;r<this.size;r++)t.push(new h(0));this.chipsArray.push(t)}for(var i=0;i<2;i++)this.addChip(new h(d()))}},{key:"addChip",value:function(e){var t=function(e){for(var t=[],r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++){var s={x:null,y:null};0===e[r][i].value&&(s.x=i,s.y=r,t.push(s))}return t}(this.chipsArray);if(t.length){var r,i=(r=t.length,t[Math.floor(Math.random()*(r-0)+0)]),s=i.x,a=i.y;this.chipsArray[a][s]=e}else console.log("no free space")}},{key:"restart",value:function(){this.startGame()}},{key:"updateTiles",value:function(){for(var e=0;e<this.size;e++)for(var t=0;t<this.size;t++)this.chipsArray[e][t].setStatus("old")}},{key:"moveLeft",value:function(){var e=this.chipsArray,t=!1;this.updateTiles();for(var r=0;r<e.length;r++)for(var i=1;i<e.length;i++){var s=e[r][i];if(0!==s.value){var a=i-m(i,e[r],"left");!0===this.moveTiles(s,e[r][a])&&!1===t&&(t=!0)}}!0===t?this.addChip(new h(d())):this.isGameOver(),this.resetTiles()}},{key:"moveUp",value:function(){var e=this.chipsArray,t=!1;this.updateTiles();for(var r=1;r<e.length;r++)for(var i=0;i<e.length;i++){var s=e[r][i];if(0!==s.value){var a=r-m({y:r,x:i},e,"up");!0===this.moveTiles(s,e[a][i])&&!1===t&&(t=!0)}}!0===t?this.addChip(new h(d())):this.isGameOver(),this.resetTiles()}},{key:"moveDown",value:function(){var e=this.chipsArray,t=!1;this.updateTiles();for(var r=this.size-2;r>=0;r--)for(var i=0;i<e.length;i++){var s=e[r][i];if(0!==s.value){var a=r+m({y:r,x:i},e,"down");!0===this.moveTiles(s,e[a][i])&&!1===t&&(t=!0)}}!0===t?this.addChip(new h(d())):this.isGameOver(),this.resetTiles()}},{key:"moveRight",value:function(){var e=this.chipsArray,t=!1;this.updateTiles();for(var r=0;r<this.size;r++)for(var i=this.size-2;i>=0;i--){var s=e[r][i];if(0!==s.value){var a=i+m(i,e[r],"right");!0===this.moveTiles(s,e[r][a])&&!1===t&&(t=!0)}}!0===t?this.addChip(new h(d())):this.isGameOver(),this.resetTiles()}},{key:"moveTiles",value:function(e,t){if(e!==t){var r=t.merge(e);return f.score+=r,2048===r&&(this.win=!0),!0}return!1}},{key:"isGameOver",value:function(){for(var e=this,r=function(r){for(var a=0;a<e.size;a++){var n=function(i){var a=e.chipsArray[r][i];if(!1===(s=t.getClosestTiles(r,i,e.chipsArray).every(function(e){return e.value!==a.value})))return e.gameOver=!1,{v:s}}(a);if("object"===i(n))return{v:n.v}}},s=!0,a=0;a<this.size;a++){var n=r(a);if("object"===i(n))return n.v}return this.gameOver=!0,!0}},{key:"resetTiles",value:function(){for(var e=0;e<this.size;e++)for(var t=0;t<this.size;t++)this.chipsArray[e][t].resetMerge()}}],[{key:"getClosestTiles",value:function(e,t,r){var i=[];return t>0&&i.push(r[e][t-1]),t<r[0].length-1&&i.push(r[e][t+1]),e>0&&i.push(r[e-1][t]),e<r.length-1&&i.push(r[e+1][t]),i}}]),t}(),h=function(){function t(r){e(this,t),this.value=r,this.ableToUnion=!0,this.status="new"}return r(t,[{key:"setStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"old";this.status!==e&&(this.status=e)}},{key:"merge",value:function(e){var t=0;return(0===this.value||this.value===e.value)&&(this.value>0&&e.value>0&&(t+=this.value+e.value,this.ableToUnion=!1,this.setStatus("merged")),this.value+=e.value,e.value=0),t}},{key:"resetMerge",value:function(){this.ableToUnion=!0}}]),t}(),f=new v;function c(){var e=f.chipsArray;console.log(e);for(var t=0;t<e.length;t++)for(var r=0;r<e[t].length;r++){var i=s[t].children[r],a=e[t][r];i.innerText;var n="old"!==a.status?"merged ":"";0!==a.value?(i.innerHTML=a.value,i.className="field-cell ".concat(n,"field-cell--").concat(a.value)):(i.innerHTML="",i.className="field-cell")}u.innerText=f.score,f.win&&l.classList.remove("hidden"),f.gameOver&&o.classList.remove("hidden")}function d(e){return 0===e?0:[2,2,2,2,2,2,2,2,2,4][Math.floor(10*Math.random())]}function m(e,t,r){var i=0;if("left"===r)for(var s=e-1;s>=0;s--)if(0===t[s].value)i++;else{if(t[s].value!==t[e].value||!t[s].ableToUnion)return i;i++}if("up"===r)for(var a=e.y,n=e.x,l=a-1;l>=0;l--)if(0===t[l][n].value)i++;else{if(t[l][n].value!==t[a][n].value||!t[l][n].ableToUnion)return i;i++}if("down"===r)for(var o=e.y,u=e.x,v=o+1;v<t.length;v++)if(0===t[v][u].value)i++;else{if(t[v][u].value!==t[o][u].value||!t[v][u].ableToUnion)return i;i++}if("right"===r)for(var h=e+1;h<t.length;h++)if(0===t[h].value)i++;else if(t[h].value===t[e].value&&t[h].ableToUnion)i++;else break;return i}a.addEventListener("click",function(){!1===f.status?(f.startGame(),c(),n.classList.add("hidden"),a.classList.remove("start"),a.classList.add("restart"),a.innerText="restart"):(function(){for(var e=0;e<s.length;e++)for(var t=0;t<s.length;t++){var r=s[e].children[t];r.innerHTML="",r.className="field-cell"}}(),f.restart(),c(),l.classList.add("hidden"),o.classList.add("hidden"))}),document.addEventListener("keydown",function(e){if(!0===f.status)switch(e.key){case"ArrowUp":f.moveUp(),c();break;case"ArrowDown":f.moveDown(),c();break;case"ArrowLeft":f.moveLeft(),c();break;case"ArrowRight":f.moveRight(),c()}});
//# sourceMappingURL=index.70fd6e18.js.map
